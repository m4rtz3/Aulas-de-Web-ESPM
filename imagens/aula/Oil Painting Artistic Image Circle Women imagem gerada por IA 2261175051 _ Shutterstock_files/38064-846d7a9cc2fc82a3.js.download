"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38064],{31722:function(e,t,i){i.d(t,{VL:function(){return ee}});var n,o=i(87394),r=i(52322),s=i(40233),a=i(2784),l=function(){var e=(0,o.Z)((0,a.useState)(!1),2),t=e[0],i=e[1],n=(0,s.d)();return{isModalOpen:t,handleOpenModal:function(){n({actionName:"convert - signup modal opened"}),i(!0)},handleCloseModal:function(){i(!1)}}},c=i(33301),d=i(52227),u=i(44297),p="add_to_collection_asset",v="add_to_collection_grid_items",f=function(e){var t=e.assets,i=e.gridItems,n=e.signUpPath;window&&(t&&window.sessionStorage.setItem(p,JSON.stringify(t)),i&&window.sessionStorage.setItem(v,JSON.stringify(i)),window.location=n)},m=function(e){var t=e.showAddToCollectionModal,i=e.isLoggedInUser;if(void 0!==i){if(i){var n=window.sessionStorage.getItem(p),o=window.sessionStorage.getItem(v),r=function(e){return e&&"undefined"!==e};if(r(n)&&r(o)){var s=JSON.parse(n),a=JSON.parse(o),l=[].concat(s);t({formattedAssets:l,gridItems:a,mappedAssetType:(0,u.A8)(l[0]),isCopyToCollection:!1,redirectToCollectionDetailsPage:!1})}}window.sessionStorage.removeItem(p),window.sessionStorage.removeItem(v)}},g=i(59979),h=i(47875),C=i(52309),w=i(94909),I=i(98788),y=i(47842),T=i(70865),S=i(5163),A=i(81740),b=i(44699),Z=i(8149),P=i(32456),O=i(7297),_=i(29292),k=i(86795),U=i(15111),R=i(18027),D=i(12787),M=i(9823),x=i(776),N=i(49670),E=i(9009),B=i(3255),V=i(52494),q=function(e){var t=e.queryParams;return(0,A.nS)({queryParams:t}).formattedUrl},L=function(e){var t=e.assetId,i=e.asset,n=i.id,o=i.tier,r=i.src,s=i.aspect,a=i.width,l=i.height;return{metadata:{notes:{media_id:t,alpha_num_id:n,rex_id:n,media_type:Z.gP,tier:void 0===o?10:o,media:{aspect:s,width:a,height:l,url:r}}}}},G=(n=(0,I.Z)(function(e){var t,i,n,o,r,s,a,l,c,d,p,v,f;return(0,S.__generator)(this,function(m){switch(m.label){case 0:if(t=e.isRexEditorial,i=e.collectionId,n=e.verificationCode,o=e.setAsCover,r=e.firstAsset,s=e.collectionType,(l=(0,u.A8)(r))!==Z.VT)return[2];return c={id:i,verificationCode:n,collectionType:s},d=(0,A.Yz)({queryParams:c}).formattedUrl,[4,N.uS.get(d).then(function(e){return(0,E.O)(e.data)||{}})];case 1:if(null==(p=m.sent())?void 0:null===(a=p.coverItem)||void 0===a?void 0:a.id)return[3,3];return v=(0,u.OP)({asset:r,isRexEditorial:t}),f=(0,k.Q)({collectionId:i,mappedAssetType:l,assetId:v}),[4,o({collection:{id:i},mediaItem:{id:f}})];case 2:m.sent(),m.label=3;case 3:return[2]}})}),function(e){return n.apply(this,arguments)}),z=function(){var e,t=(0,o.Z)((0,a.useState)({status:"",error:void 0}),2),i=t[0],n=t[1],r=(0,o.Z)((0,a.useState)(""),2),s=r[0],l=r[1],c=(0,o.Z)((0,a.useState)(""),2),d=c[0],p=c[1],v=(0,D.J)(),f=(0,V.w)().setAsCover,m=(0,M.D)().isBrandSstk,g=(0,x.yh)().analytics,h=(0,_.UM)(g),C=(0,B.kY)().mutate;return{add:(0,a.useCallback)((e=(0,I.Z)(function(e){var t,i,o,r,s,a,c,d,g,w,I,_,D,M,x,E,B,V,z,J,j,H,Y;return(0,S.__generator)(this,function(S){switch(S.label){case 0:t=e.assets,i=e.assetType,o=e.gridItems,r=e.groupedOptions,s=e.id,a=e.title,c=e.verificationCode,d=e.pageSection,g=e.listId,w=(0,U.wZ)({assetType:i,isBrandSstk:m}),S.label=1;case 1:if(S.trys.push([1,6,7,9]),n({status:b.MR,error:void 0}),I=(0,u.Xo)(i),_=s,D=c,r&&r.length&&(M=r.find(function(e){return e.title===a}))&&(_=M.id,D=M.verificationCode),_)return[3,3];return x=(0,A.A6)().formattedUrl,E={data:{attributes:{title:a,collectionType:w,isPublic:!1},type:P.Ul}},[4,N.uS.post(x,E)];case 2:V=(B=S.sent().data).id,z=B.attributes.verificationCode,_=V,D=z,S.label=3;case 3:return J={data:t.map(function(e){var t=(0,u.OP)({asset:e,isRexEditorial:I}),i=(0,u.A8)(e);return(0,T.Z)({type:P.A8,id:(0,k.Q)({collectionId:_,mappedAssetType:i,assetId:t})},i===Z.VT&&L({assetId:t,asset:e}))})},j=(0,A.mp)({urlParams:{id:_},queryParams:{isRexEditorial:I}}).formattedUrl,H=(0,R.y)(h),[4,N.uS.post(j,J,H?{headers:(0,y.Z)({},O.as,H)}:void 0)];case 4:return S.sent(),[4,G({isRexEditorial:I,collectionId:_,verificationCode:D,setAsCover:f,firstAsset:t[0],collectionType:w})];case 5:return S.sent(),v({collectionId:_,collectionName:a,gridItems:o,assets:t,pageSection:d,listId:g}),l(_),p(D),[3,9];case 6:return Y=S.sent(),n({status:b.cM,error:Y}),[3,9];case 7:return[4,C(q({queryParams:{"filter[type]":w}}))];case 8:return S.sent(),[7];case 9:return[2]}})}),function(t){return e.apply(this,arguments)}),[m,h,f,v,C]),collectionId:s,setStatus:n,status:i,verificationCode:d}},J=i(12649),j=i(92405),H=i(25237),Y=i.n(H),K=i(26297),Q=Y()(function(){return Promise.all([i.e(27310),i.e(81503),i.e(24394),i.e(28903),i.e(88249),i.e(59344),i.e(99624),i.e(79637),i.e(20432)]).then(i.bind(i,92805)).then(function(e){return e.CollectionModal})},{loadableGenerated:{webpack:function(){return[92805]}},ssr:!1}),X=function(e){var t=e.isOpen,i=(0,K.Z)(e,["isOpen"]);return(0,C.B)(t)&&(0,r.jsx)(Q,(0,T.Z)({isOpen:t},i))},F=Y()(function(){return Promise.all([i.e(27310),i.e(81503),i.e(24394),i.e(28903),i.e(25437),i.e(4196),i.e(46215),i.e(29730),i.e(14727),i.e(82535),i.e(30502),i.e(51454)]).then(i.bind(i,82631)).then(function(e){return e.ExperimentUTLZ269})},{loadableGenerated:{webpack:function(){return[82631]}},ssr:!1}),W=Y()(function(){return i.e(8880).then(i.bind(i,8880)).then(function(e){return e.Snackbar})},{loadableGenerated:{webpack:function(){return[8880]}},ssr:!1}),$=function(e){var t=e.assets,i=e.assetType,n=e.collectionId,o=e.collectionTitle,s=e.gridItems,l=e.isDialogActive,d=e.isSnackBarOpen,u=e.onAddToCollections,p=e.onAlertSnackbarClose,v=e.onAddToCollectionsComplete,f=e.redirectToCDPAction,m=e.setIsDialogActive,g=e.showCopyToModalTitle,h=e.status,w=e.verificationCode,I=e.pageSection,y=(0,j.p)(c.vb),T=(0,j.p)(c.pG),S=(0,C.B)(t),A=(0,a.useCallback)(function(){return m(!1)},[m]);return S?y||T&&l?(0,r.jsx)(F,{onClose:A,isOpen:l,items:t,onAddToCollectionsComplete:v,pageSection:I}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(X,{assets:t,assetType:i,collectionId:n,gridItems:s,isOpen:l,onAddToCollections:u,setIsDialogActive:m,showCopyToModalTitle:g,pageSection:I}),(0,r.jsx)(W,{assetType:i,collectionId:n,collectionTitle:o,isOpen:d,onAlertSnackbarClose:p,redirectToCDPAction:f,status:h,verificationCode:w})]}):null};$.defaultProps={assetType:"",assets:null,gridItems:null,onAddToCollectionsComplete:void 0,redirectToCDPAction:{}};var ee=function(e){var t=e.initialAssetType,i=(0,o.Z)((0,a.useState)(!1),2),n=i[0],r=i[1],s=(0,o.Z)((0,a.useState)(!1),2),c=s[0],C=s[1],I=(0,o.Z)((0,a.useState)(!1),2),y=I[0],T=I[1],S=(0,o.Z)((0,a.useState)(""),2),A=S[0],b=S[1],Z=(0,o.Z)((0,a.useState)(null),2),P=Z[0],O=Z[1],_=(0,o.Z)((0,a.useState)(t),2),k=_[0],U=_[1],R=(0,o.Z)((0,a.useState)(null),2),D=R[0],M=R[1],x=(0,o.Z)((0,a.useState)(null),2),N=x[0],E=x[1],B=(0,o.Z)((0,a.useState)(null),2),V=B[0],q=B[1],L=(0,J.B)(),G=(0,g.cM)(),j=(0,h.L)(),H=(0,w.d)(),Y=l(),K=Y.isModalOpen,Q=Y.handleCloseModal,X=Y.handleOpenModal,F=(0,o.Z)((0,a.useState)({shouldHandleRedirect:!1,redirectToCollectionDetailsPage:j}),2),W=F[0],ee=F[1],et=z(),ei=et.add,en=et.status,eo=et.collectionId,er=et.verificationCode,es=(0,d.c)().setIsSaveInProgress;(0,a.useEffect)(function(){return function(){return O(null)}},[]),(0,a.useEffect)(function(){return function(){return U("")}},[]);var ea=(0,a.useCallback)(function(e){var t=e.formattedAssets,i=e.gridItems,n=e.isCopyToCollection,o=e.mappedAssetType,s=e.redirectToCollectionDetailsPage,a=e.pageSection,l=e.listId;U(o),O(t),E(a),q(l),n&&T(!0),i&&M(i),s&&ee({shouldHandleRedirect:!0,redirectToCollectionDetailsPage:s}),r(!0)},[]);return(0,a.useEffect)(function(){m({showAddToCollectionModal:ea,isLoggedInUser:L})},[L,ea]),{addToCollectionViewsProps:(0,a.useMemo)(function(){return{assets:P,pageSection:N,assetType:k,collectionId:eo,collectionTitle:A,gridItems:D,isDialogActive:n,isSnackBarOpen:c,onAddToCollections:function(e){var t=e.id,i=e.title,n=e.verificationCode,o=e.groupedOptions,s=e.pageSection;return b(i),r(!1),C(!0),ei({assetType:k,assets:P,gridItems:D,groupedOptions:o,id:t,title:i,verificationCode:n,pageSection:s||N,listId:V})},onAlertSnackbarClose:function(){return C(!1)},redirectToCDPAction:W,setIsDialogActive:r,showCopyToModalTitle:y,status:en,verificationCode:er}},[P,D,ei,V,N,k,eo,A,n,c,W,y,en,er]),addToCollectionViewsHandler:(0,a.useCallback)(function(e){var t=e.assets,i=e.gridItems,n=e.isCopyToCollection,o=e.redirectToCollectionDetailsPage,r=e.pageSection,s=e.listId,a=e.openModal;if(L){es(!0);var l=[].concat(t);ea({formattedAssets:l,gridItems:i,isCopyToCollection:void 0!==n&&n,mappedAssetType:(0,u.A8)(l[0]),redirectToCollectionDetailsPage:o,pageSection:r,listId:s})}else void 0!==a&&a&&!H?(t&&window.sessionStorage.setItem(p,JSON.stringify(t)),i&&window.sessionStorage.setItem(v,JSON.stringify(i)),X()):f({assets:t,gridItems:i,signUpPath:G})},[X,L,H,ea,G,es]),AddToCollectionViews:$,isModalOpen:K,handleCloseModal:Q}}},63256:function(e,t,i){i.d(t,{KW:function(){return v},VC:function(){return f},fp:function(){return d},lR:function(){return u},ok:function(){return m},qG:function(){return p},r8:function(){return g},vG:function(){return c}});var n=i(87394),o=i(97258),r=i(8149),s=i(44297),a=i(31683),l=[r.pX],c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:480;if(!a.n5||"string"!=typeof e||e.includes("ip=x".concat(t)))return e;try{var i=new URL(e);return i.searchParams.set("ip","x".concat(t)),i.href}catch(t){return e}},d=function(e){var t,i,n;return(null==e?void 0:e.mediaItem)?{previewImageUrl:null===(i=e.mediaItem)||void 0===i?void 0:i.previewImageUrl,previewVideoUrls:null===(n=e.mediaItem)||void 0===n?void 0:n.previewVideoUrls}:{previewImageUrl:(null==e?void 0:e.thumbImageUrl)||(null==e?void 0:null===(t=e.image)||void 0===t?void 0:t.url)||(null==e?void 0:e.previewImageUrl),previewVideoUrls:null==e?void 0:e.previewVideoUrls}},u=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:480;return(0,s.Am)(t)?c(d(t).previewImageUrl,i):t.src||(null===(e=t.image)||void 0===e?void 0:e.url)},p=function(e){return e.assetType===r.pX?"mp4":null},v=function(e){var t=e.asset;return l.includes((0,s.Tp)(t))&&!(0,s.so)(t)},f=function(){var e,t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,s.vh)(null==i?void 0:i.type))return(null==i?void 0:i.width)>1e3?"".concat(null==i?void 0:i.previewUrls[0],"?width=1000"):null==i?void 0:i.previewUrls[0];var n=(0,s.EK)(i)?o.bm:o.RA,r=null==i?void 0:null===(e=i.displays)||void 0===e?void 0:null===(t=e[n])||void 0===t?void 0:t.src;return(0,s.f8)(i)&&i.angle?r.replace(/\/([A-Z]\d\d)./,"/".concat(i.angle,".")):r},m=function(){var e,t,i,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,s.Tp)(n);return a===r.k4||a===r.zo||a===r.Nk?(null==n?void 0:null===(e=n.displays)||void 0===e?void 0:null===(t=e[o.bm])||void 0===t?void 0:t.src)||(null==n?void 0:n.src):a===r.bz?null==n?void 0:null===(i=n.imageVariants)||void 0===i?void 0:i["1500"]:a===r.xF||a===r.tn?null==n?void 0:n.previewMp3:a===r.hv?null==n?void 0:n.previewUrls[0]:null},g=function(){var e,t,i,o,r,a,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d={width:null!==(o=null!==(i=l.width)&&void 0!==i?i:null===(e=l.mediaItem)||void 0===e?void 0:e.width)&&void 0!==o?o:0,height:null!==(a=null!==(r=l.height)&&void 0!==r?r:null===(t=l.mediaItem)||void 0===t?void 0:t.height)&&void 0!==a?a:0};if((0,s.Am)(l)&&(!d.width||!d.height)&&l.sizes){var u=Object.keys(l.sizes).find(function(e){return l.sizes[e]});d.width=u&&l.sizes[u].width||0,d.height=u&&l.sizes[u].height||0}if(c&&(!d.width||!d.height)&&l.aspectRatioCommon){var p=(0,n.Z)(l.aspectRatioCommon.split(":"),2),v=p[0],f=p[1];d.width=Number(v),d.height=Number(f)}return d}},18027:function(e,t,i){i.d(t,{y:function(){return n}});var n=function(e){return[e.subPage,e.pageType].join("-")}},12787:function(e,t,i){i.d(t,{J:function(){return a}});var n=i(29292),o=i(776),r=i(2784),s=i(68533),a=function(){var e=(0,o.yh)().analytics,t=(0,s.Y)().getSearchContext;return(0,r.useCallback)(function(i){var o=i.collectionId,r=i.collectionName,s=i.gridItems,a=i.assets,l=i.pageSection,c=i.listId;e.productAddedToWishlist({products:a.map(function(e){return(0,n.bR)({asset:e,getSearchContext:t,gridItems:s,pageSection:l})}),wishlist_id:o,wishlist_name:r,list_id:null!=c?c:""})},[e,t])}},47875:function(e,t,i){i.d(t,{L:function(){return a}});var n=i(50930),o=i(68445),r=i(5632),s=i(2784),a=function(){var e=(0,r.useRouter)();return(0,s.useCallback)(function(t){var i=t.assetType,r=t.collectionId,s=t.verificationCode,a=(0,o.B)({assetType:i,id:r,verificationCode:s});e.push.apply(e,(0,n.Z)(a))},[e])}},3571:function(e,t,i){i.d(t,{H:function(){return I},m:function(){return y}});var n=i(47842),o=i(70865),r=i(26297),s=i(87394),a=i(85129),l=i(11181),c=i(7297),d=i(9823),u=i(88436),p=i(6647),v=i(70314),f=i.n(v),m=i(5632),g=i(2784),h=f()().publicRuntimeConfig._app,C=h.name,w=h.version,I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":",t=(0,u.r)(),i=(0,m.useRouter)().pathname,v=(0,d.D)().brand,f=(0,s.Z)(i.replace(a.aD[v],"").split("/"),2)[1],h=l.GRAPH_BRAND_LOOKUP[v];return(0,g.useCallback)(function(i,s){var a,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=l.headers,u=(0,r.Z)(l,["headers"]);return(0,p.request)((0,o.Z)({url:"/api/graphql",document:i,variables:s,requestHeaders:(0,o.Z)((a={},(0,n.Z)(a,c.B,"".concat(C).concat(e).concat(h).concat(e).concat(f)),(0,n.Z)(a,c.bY,w),(0,n.Z)(a,c.yx,t),a),d)},u))},[t,e,h,f])},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":",t=(0,u.r)(),i=(0,m.useRouter)().pathname,o=(0,d.D)().brand,r=(0,s.Z)(i.replace(a.aD[o],"").split("/"),2)[1],v=l.GRAPH_BRAND_LOOKUP[o];return(0,g.useCallback)(function(i,o,s){var a;return new p.GraphQLClient("/api/graphql?forceErrorData=true",{headers:(a={},(0,n.Z)(a,c.B,"".concat(C).concat(e).concat(v).concat(e).concat(r)),(0,n.Z)(a,c.bY,w),(0,n.Z)(a,c.yx,t),a),errorPolicy:"all"}).rawRequest(i,o,s)},[t,e,v,r])}},52494:function(e,t,i){i.d(t,{w:function(){return u}});var n=i(98788),o=i(87394),r=i(5163),s=i(81740),a=i(44699),l=i(32456),c=i(49670),d=i(2784),u=function(){var e,t=(0,o.Z)((0,d.useState)({status:"",error:void 0}),2),i=t[0],u=t[1],p=(0,d.useCallback)((e=(0,n.Z)(function(e){var t,i,n,o,d;return(0,r.__generator)(this,function(r){switch(r.label){case 0:t=e.collection,i=e.mediaItem,n=(0,s.df)({urlParams:{id:t.id}}).formattedUrl,o={data:{id:t.id,relationships:{"cover-item":{data:{id:"".concat(i.id),type:l.A8}}},type:l.Ul}},r.label=1;case 1:return r.trys.push([1,3,,4]),u({status:a.MR,error:void 0}),[4,c.uS.patch(n,o)];case 2:return r.sent(),[3,4];case 3:return d=r.sent(),u({status:a.cM,error:d}),[3,4];case 4:return[2]}})}),function(t){return e.apply(this,arguments)}),[]);return{status:i,setStatus:u,setAsCover:p}}}}]);
//# sourceMappingURL=38064-846d7a9cc2fc82a3.js.map